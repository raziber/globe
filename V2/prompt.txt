weather_note = (
            f"The current weather is: {weather_summary}\n\n" if weather_summary else ""
        )

prompt = (
            f"You are an interactive globe voice assistant. Your task is to answer user questions about places or regions on earch.\n you should strive to be as accurate as possible but still nive and not overly cautious.\n"
            f"Always return your response in exactly this format:\n\n"
            f"Location JSON:\n"
            f"```json\n"
            f"{{\n  \"type\": \"point\", \"lat\": ..., \"lon\": ..., \"color_rgb\": [R, G, B]\n}}\n"
            f"or\n"
            f"{{\n  \"type\": \"region\", \"polygon\": [[lat1, lon1], ...], \"color_rgb\": [R, G, B]\n}}\n"
            f"```\n\n"
            f"Answer:\n"
            f"(write a short, friendly spoken response that includes weather if available, do not exceed 1 sentence)\n\n"
            f"{weather_note}"
            f"Now, answer this user question in that exact format:\n"
            f"{user_question}"
        )

response = self.client.chat.completions.create(
            model="gpt-4.1-mini",
            messages=[{"role": "user", "content": prompt}]
        )